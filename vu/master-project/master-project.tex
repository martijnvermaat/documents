\documentclass[11pt,oneside,a4paper,final]{report}
\usepackage[english]{babel}


% Use some subversion information
\usepackage{svn-multi}
\svnid{$Id$}


% Use scalable, PostScript Type 1 versions of the Computer Modern fonts.
\usepackage{type1cm}

% How to encode fonts.
\usepackage[T1]{fontenc}

% Text encoding to take for data input stream. I.e. the text we write in.
\usepackage[latin1]{inputenc}

\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}

% Times
%\usepackage{txfonts}
%\usepackage{times}

% Times
%\usepackage{mathptmx}

% Palatino
%\usepackage{pxfonts}
%\usepackage{palatino}

% Palatino
%\usepackage[osf,sc]{mathpazo}

% TeX Gyre Pagella (like Palatino)
%\usepackage{qpxmath}
%\usepackage{tgpagella}

% TeX Gyre Termes (like Times)
\usepackage{qtxmath}
\usepackage{tgtermes}

% txtt for tt
\renewcommand{\ttdefault}{txtt}

% Computer Modern for tt
%\renewcommand{\ttdefault}{cmtt}

% Helvetica for sans serif
%\renewcommand{\sfdefault}{qhv}
\usepackage[scaled=0.95]{helvet}


\usepackage{a4}

\raggedbottom

% Dutch style of paragraph formatting, i.e. no indents.
%\setlength{\parskip}{1.3ex plus 0.2ex minus 0.2ex}
\setlength\parskip{\medskipamount}
%\setlength\parskip{\bigskipamount}
\setlength{\parindent}{0pt}

% Linespacing
\usepackage{setspace}
\onehalfspacing
%\doublespacing


% Natbib for the bibliography, always. sort&compress will make i.e. [1-5,7].
%\usepackage[square,numbers,sort&compress]{natbib}
%\usepackage[authoryear,sort]{natbib}
\usepackage[numbers]{natbib}
\setlength{\bibhang}{0ex}


\usepackage{amsthm}

\theoremstyle{definition}
\newtheorem{definition}{Definition}


\usepackage{paralist}
\setdefaultenum{i.}{a.}{}{}


% Must be last in preamble
\usepackage[
  pdftex,
  colorlinks,
  citecolor=black,
  filecolor=black,
  linkcolor=black,
  urlcolor=black,
  pdfauthor={Martijn Vermaat},
  pdftitle={Infinitary Rewriting in Coq},
  pdfsubject={A Mechanically Verifiable Formalisation of Infinitary Rewriting in the Coq Proof Assistant},
  pdfkeywords={rewriting, infinitary rewriting, verification, coq, functional programming},
  draft=true
]{hyperref}
\usepackage[figure]{hypcap}


\title{Infinitary Rewriting in Coq}

\author{Martijn Vermaat}
\date{MSc. Thesis (\emph{draft r\svnrev})}


\begin{document}


\maketitle


\begin{abstract}
  Abstract describing the thesis in a few sentences.
\end{abstract}


\chapter*{Preamble}

Bla.


\section*{Acknowledgements}

Joint work with Dimitri Hendriks.
J\"urg Endrullis.
Vincent van Oostrom.
Femke van Raamsdonk.
Roel de Vrijer.


\tableofcontents


\chapter{Introduction}

Infinitary term rewriting, the Coq proof assistant, etc.


\section*{Outline}

In chapter~\ref{chap:itr} we introduce the theory of infinitary term
rewriting. To this end we first give a quick summary of traditional (finitary)
term rewriting and an introduction to the mathematical concept of ordinal
numbers.

The goal of chapter~\ref{chap:formalization} is to introduce our formalization
of infinitary term rewriting in the Coq proof assistant. We first discuss this
proof assistant and then review the main parts of our development.

Our formalization was used to prove that in infinitary rewriting, weak
orthogonality does not imply unique normal forms. This application is
discussed in chapter~\ref{chap:unwo}.

Finally, in chapter~\ref{chap:conclusion} we summarize our results and draw
conclusions.


\chapter{Infinitary Term Rewriting}\label{chap:itr}


\section{Term Rewriting}

TODO: Short motivation for term rewriting, summation of its applications and
aspects of rewriting that are studied.

We give a short introduction to the basic notions of term rewriting needed for
section~\ref{sec:itr}. For a more in-depth treatment of the theory of term
rewriting, consult (TODO: terese etc). In this section, we use definitions and
notations from Terese.


\subsection{Definition of a TRS}

\begin{definition}[Signature]
A \emph{signature} $\Sigma$ is a non-empty set of \emph{function symbols} $f,
g, \ldots$. Each function symbol $f$ has a fixed natural number $\#_f$, which
we call its \emph{arity}. A function symbol with arity $0$ is also called a
\emph{constant}.
\end{definition}

\begin{definition}[Term]
The set of \emph{terms} $Ter_\Sigma(X)$ over a signature $\Sigma$ and a set of
variables $X = \{x, y, \ldots\}$ is defined by induction:
\begin{compactenum}
  \item
    $x \in Ter_\Sigma(X)$ for every variable $x \in X$.
  \item
    If $f \in \Sigma$ is a function symbol with arity $n$ and $t_1, \ldots,
    t_n \in Ter_\Sigma(X)$, then $f(t_1, \ldots, t_n) \in Ter_\Sigma(X)$.
\end{compactenum}
\end{definition}

The terms $t_i$ are called the \emph{arguments} of $f(t_1, \ldots, t_n)$ and
the symbol $f$ the \emph{root}. By $Var(t)$ we denote the set of variables
occuring in $t$, and $t$ is \emph{closed} if $Var(t) = \emptyset$. If no
variable occurs more than once in $t$, we say $t$ is \emph{linear}.

Often, the set of variables $X$ is left implicit and $Ter_\Sigma(X)$ is
denoted simply by $Ter_\Sigma$.

\begin{definition}[Rewrite rule]
  A \emph{rewrite rule} $\rho$ for a signature $\Sigma$ is a pair $\langle l,
  r \rangle$ of terms in $Ter_\Sigma$ (written $\rho : l \rightarrow r$). We
  restrict ourselves to rewrite rules where $l$ is not a variable and $Var(r)
  \subseteq Var(l)$.
\end{definition}

\begin{definition}[TRS]
A \emph{term rewriting system} (TRS) $\mathcal{R}$ is a pair $\langle \Sigma,
R \rangle$ of a signature $\Sigma$ and a set of rewrite rules $R$ on
$\Sigma$.
\end{definition}

In contrast to Terese, we do not define contexts as terms over an extended
signature. Instead, a direct inductive definition is given because this is how
the notion of context is defined in our Coq development.
% TODO: the main reason being that we choose not to consider multi-hole contexts

\begin{definition}[Context]
The set of (one-hole) \emph{contexts} $Ctx_\Sigma$ over a signature $\Sigma$
is defined by induction:
\begin{compactenum}
  \item
    $\Box \in Ctx_\Sigma$.
  \item
    If $f \in \Sigma$ is a function symbol with arity $n + 1$, $C \in
    Ctx_\Sigma$, and $t_1, \ldots, t_n \in Ter_\Sigma$, then for any $m
    \leq n + 1$, $f(t_1, \ldots, t_m, C, t_{m+2}, \ldots, t_{n}) \in
    Ctx_\Sigma$.
\end{compactenum}
\end{definition}

Thus every context $C$ has exactly one occurence of the symbol $\Box$, called
its \emph{hole}. By the term $C[t]$ we mean the result of replacing the hole
of $C$ by $t$.

\begin{definition}[Substitution]
Given a signature $\Sigma$ and a set of variables $X$, a \emph{substitution}
$\sigma$ is a mapping from $X$ to $Ter_\Sigma(X)$. It can be generalized to
a mapping $\bar{\sigma} : Ter_\Sigma(X) \rightarrow Ter_\Sigma(X)$
inductively:
\begin{align*}
  \bar{\sigma}(x) &= \sigma(x)\\
  \bar{\sigma}(f(t_1, \ldots, t_n)) &= f(\bar{\sigma}(t_1), \ldots, \bar{\sigma}(t_n))
\end{align*}
\end{definition}

Since $\bar{\sigma}$ is completely defined by $\sigma$ we refer to both as
`the' substitution $\sigma$. The notation $[x_1, \ldots, x_n := s_1, \ldots,
  s_n]$ is used for the substitution $\sigma$ with $\sigma(x_i) = s_i$ for $1
\leq i \leq n$ and $\sigma(y) = y$ for all other $y$. Applying a substitution % TODO: syntactical equality?
$\sigma$ to a term $t$ is usually written $t^\sigma$.

If we view a rewriting rule $\rho : l \rightarrow r$ as a \emph{scheme}, an
\emph{instance} of $\rho$ can be obtained by applying a substitution
$\sigma$. The result is the \emph{atomic} rewrite step $l^\sigma
\rightarrow_\rho r^\sigma$. We call $l^\sigma$ a ($\rho$-) \emph{redex} and
$r^\sigma$ its \emph{contractum}.

\begin{definition}[Rewrite step]
A \emph{rewrite step} $C[l^\sigma] \rightarrow_\rho C[r^\sigma]$ according to
$\rho$ consists of a rewrite rule $\rho : l \rightarrow r$, a substitution
$\sigma$ and a context $C$.
\end{definition}

We call $\rightarrow_\rho$ the \emph{one-step rewriting relation} generated by
$\rho$. The one-step rewriting relation $\rightarrow$ of a TRS $\mathcal{R}$
with rewrite rules $R$ is defined as the union of $\{ \rightarrow_\rho | \;
\rho \in R \}$.


\subsection{Orthogonality}

Bla.


\subsection{Normal Forms}

Bla.


\section{Ordinal Numbers}

% ordinals are origininally by Cantor

Ordinal numbers (ordinals for short) are an extension of the natural numbers
with transfinite objects. Indeed, the finite ordinals are just the natural
numbers. The smallest infinite ordinal is called $\omega$ and following
$\omega$ we have $\omega + 1$, $\omega + 2$, \ldots, $\omega \times 2$. Then
there are the ordinals $\omega \times 2 + 1$, $\omega \times 2 + 2$, \ldots,
$\omega \times 3$. Some other (still relatively small) ordinals are:
\begin{displaymath}
  \omega^2 \qquad
  \omega^\omega \qquad
  \omega^{\omega^2} \qquad
  \omega^{\omega^\omega} \qquad
  \omega^{\omega^{\omega^{\ldots}}} = \epsilon_0 % TODO: diagonal dots
\end{displaymath}
Note that this is all just notation, we have not yet defined a representation
for ordinals and what $+$ and $\times$ are.

In set theory, ordinals are usually represented by hereditarily transitive
sets. Zero corresponds to the empty set $\emptyset$, one to the singleton $\{
\emptyset \}$ and so on, and $\omega$ is represented by $\{ \emptyset, \{
\emptyset \}, \{ \emptyset, \{ \emptyset \} \} , \ldots \}$. Now $\in$
constitutes a well-founded total order on the ordinals.

We abbreviate $\alpha \cup \{ \alpha \}$ by $\alpha^+$ (corresponding to the
successor function) and say that $\alpha$ is a successor ordinal if $\alpha =
\beta^+$ for some ordinal $\beta$. If $\alpha$ is not a successor ordinal and
$\alpha \neq \emptyset$, it is called a limit ordinal. So an ordinal can
be either zero, a successor ordinal, or a limit ordinal.

From now on, we make no distinction between an ordinal and its set-theoretic
representation (e.g.\ between $0$ and $\emptyset$). Examples of successor
ordinals are $4$, $\omega + 7$  and $\omega^{\omega \times 2} + 1$. Examples
of limit ordinals are $\omega$ and $\omega \times 3$.

% TODO: we also make no distinction between the ordinal and its brouwer
% ordinal
% TODO: i use + en x all the time, while not explaining their meaning
% TODO: use lambda for the limit ordinal in addition definition

One can do arithmetics on ordinals much like we do arithmetics on natural
numbers. For example, addition can be defined by recursion on the right
argument:
\begin{align*}
  \alpha + 0       &= \alpha\\
  \alpha + \beta^+ &= (\alpha + \beta)^+\\
  \alpha + \beta   &= \bigcup \{ \alpha + \gamma \; | \; \gamma \in \beta \}
\end{align*}

% http://books.google.com/books?id=_hsUmpc6OfcC&pg=PA418&lpg=PA418&dq=schwichtenberg+%22tree+ordinal%22&source=bl&ots=PiwnKytq5C&sig=9_RpDlf89Oz3X_sHfkN0-VbDrZY#v=onepage&q&f=false


\subsection{Brouwer Ordinals}\label{sub:brouwer}

The Brouwer ordinals are a constructive representation of the countable
ordinals as countably branching well-founded trees. Their inductive definition
uses constructors $0$, $^+$ and $\sqcup$. Again, we identify ordinals and
their representation as Brouwer ordinal (and by $^+$ we no longer mean the
set-theoretic abbreviation defined above).

\begin{definition}[Ordinals]
The set of \emph{Brouwer ordinals} (ordinals) $\Omega$ is defined by
induction:
\begin{compactenum}
  \item
    $0 \in \Omega$.
  \item
    If $\alpha \in \Omega$, then $\alpha^+ \in \Omega$.
  \item
    % TODO: explain the notation with \sqcup
    If $\beta_i \in \Omega$ for all $i \in \mathbb{N}$, then $\sqcup_i \beta_i
    \in \Omega$.
\end{compactenum}
\end{definition}

They are not uniquely represented and not linearly ordered.


\section{Infinitary Term Rewriting}\label{sec:itr}


\subsection{Definition of an iTRS}

Coinductive terms, finite rewriting rules, infinite rewriting sequences,
convergence definitions.


\chapter{A Mechanically Verifiable Formalization}\label{chap:formalization}


\section{The Coq Proof Assistant}


\section{Ordinal Numbers}


\section{Coinductive Terms}


\section{Transfinite Rewrite Sequences}


\chapter{UN$^\infty$ and Weak Orthogonality}\label{chap:unwo}


\section{Jan Willem's Counterexample}


\section{Description of UNWO.v}


\chapter{Conclusion}\label{chap:conclusion}


\pagebreak


\nocite{*}
\bibliographystyle{plain}
\bibliography{master-project}


\end{document}
